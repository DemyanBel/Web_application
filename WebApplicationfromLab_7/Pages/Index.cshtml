@page
@model WebApplicationfromLab_7.Pages.IndexModel
@{
    ViewData["Title"] = "Текстовая игра";
}

<div class="game-container">
    @if (!Model.GameStarted)
    {
        <div class="start-screen">
            <img src="/images/startImage.jpg" class="start-image" alt="Start Image" />
            <form method="post" asp-page-handler="StartGame" class="start-form">
                <button type="submit" class="start-button">Начать игру</button>
            </form>
        </div>
    }
    else
    {
        <div class="scene-container">
            <img src="@Model.CurrentScene.Image" class="scene-image" alt="Scene Image" />
            <div class="text-and-choices">
                <p class="scene-text">@Model.CurrentScene.Text</p>
                <div class="choices">
                    @if (Model.CurrentScene.Choices != null)
                    {
                        @for (int i = 0; i < Model.CurrentScene.Choices.Count; i++)
                        {
                            <form method="post">
                                <input type="hidden" name="choiceId" value="@i" />
                                <button type="submit" class="choice-button">@Model.CurrentScene.Choices[i].Text</button>
                            </form>
                        }
                    }
                </div>
            </div>
        </div>
    }
</div>
<audio id="backgroundMusic" autoplay loop>
    <source src="@Model.BackgroundMusic" type="audio/mpeg">
</audio>
<style>
    html, body {
        margin: 0;
        padding: 0;
        min-height: 100%; /* Минимальная высота на 100% экрана */
    }

    body {
        background-color: #222;
        color: white;
    }

    .game-container {
        width: 100%;
        min-height: 100vh; /* Минимальная высота на 100% высоты экрана */
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
    }

    .start-screen {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        min-height: 100vh;
    }

    .start-image {
        width: 100%; /* Растягиваем на всю ширину контейнера*/
        height: 100%; /* Растягиваем на всю высоту контейнера */
        object-fit: fill; /* Растягиваем картинку, игнорируя пропорции*/
        position: absolute;
        top: 0;
        left: 0;
    }

    .start-form {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1;
        display: inline-block;
    }

    .scene-container {
        width: 100%;
        min-height: 100vh;
        position: relative;
    }

    .scene-image {
        width: 100%;
        height: 100%;
        object-fit: fill; /* Растягиваем картинку, игнорируя пропорции*/
        position: absolute;
        top: 0;
        left: 0;
    }

    .text-and-choices {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 10px;
        text-align: center;
        z-index: 1;
    }

    .scene-text {
        font-size: 2.4em;
        margin-bottom: 40px;
    }

    .choices {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .choice-button {
        margin-bottom: 20px;
        padding: 22px 35px;
        background-color: #556B2F;
        color: black;
        border: 2px solid black; /* Добавляем контур */
        border-radius: 5px; /* Делаем углы кнопки закругленными */
        cursor: pointer;
        font-size: 1.7em; /* Увеличиваем размер текста */
    }

    .start-button {
        padding: 25px 40px;
        background-color: #556B2F;
        color: black;
        border: 2px solid black; /* Добавляем контур */
        border-radius: 5px; /* Делаем углы кнопки закругленными */
        cursor: pointer;
        font-size: 1.5em;
    }
</style>